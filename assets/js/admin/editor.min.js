( function( $ ) {//TODO: manage comments

	"use strict";

	var panelMutationObserver = new MutationObserver(function(mutations) {
		// Prevent Bubble up on Section Click

		// Promote Premium Widgets
			$('.elementor-element--promotion').on('click', function() {
				var dialogButton = $('.dialog-button');
					dialogButton.hide();
					$('.trad-see-it-in-action').remove();
					$('.trad-see-it-in-action-upgrade').remove();
					$('.trad-upgrade-dynamic-content').remove();

					var url = '',
						upgradeURL = '',
						upgradeText = 'Ugrade to Pro',
						title = $(this).find('.title').text();

					if ( title === 'Turbo Timeline') {
						url += 'https://turbo-addons.com/time-line/';
						upgradeURL = 'https://turbo-addons.com/pricing/';
					} else if ( title === 'Progress Milestones') {
						url += 'https://turbo-addons.com/progress-milestone/';
						upgradeURL = 'https://turbo-addons.com/pricing/';
					}else if ( title === 'Turbo Review Archive') {
						url += 'https://turbo-addons.com/review-archive/';
						upgradeURL = 'https://turbo-addons.com/pricing/';
					}else if ( title === '3D Carousel') {
						url += 'https://turbo-addons.com/3d_carousel/';
						upgradeURL = 'https://turbo-addons.com/pricing/';
					}else if ( title === 'Turbo Testimonial Slider') {
						url += 'https://turbo-addons.com/testimonial-slider/';
						upgradeURL = 'https://turbo-addons.com/pricing/';
					}else if ( title === '3D Flip Box') {
						url += 'https://turbo-addons.com/3d-flip-box/';
						upgradeURL = 'https://turbo-addons.com/pricing/';
					}

					if ( !dialogButton.next('a').length ) {
						dialogButton.after('<a href="'+ url +'" target="_blank" class="trad-see-it-in-action dialog-button elementor-button" style="background-color:#2e3192; color:#fff; width: 48%">Live Preview</a>');
						$('.trad-see-it-in-action').after('<a href="'+ upgradeURL +'" target="_blank" class="trad-see-it-in-action-upgrade e-accent dialog-button elementor-button">'+ upgradeText +'</a>');
					} else {
						$('.trad-see-it-in-action').attr('href', url);
					}

					$('.trad-see-it-in-action').css({
						'display' : 'block',
						'margin-bottom' : '12px'
					});
			});

		// Promote Dynamic Tags
	});

	// Listen to Elementor Panel Changes
	panelMutationObserver.observe($('#elementor-panel')[0], {
	  childList: true,
	  subtree: true,
	});


}( jQuery ) );